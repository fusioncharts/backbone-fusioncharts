!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.BackboneFusionCharts=t():e.BackboneFusionCharts=t()}(window,function(){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=3)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){return null!==e&&"object"===(void 0===e?"undefined":n(e))}t.isObject=r,t.isCallable=function(e){return"function"==typeof e},t.isSameObjectContent=function e(t,a){if(Object.keys(t).length!==Object.keys(a).length)return!1;var n=Object.keys(t);for(var s=0;s<n.length;s+=1){var i=n[s];if(r(t[i])&&r(a[i])){if(!e(t[i],a[i]))return!1}else if(t[i]!==a[i])return!1}return!0},t.isUndefined=function(e){return void 0===e},t.deepCopyOf=function(e){return JSON.parse(JSON.stringify(e))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["renderAt","type","id","width","height","dataFormat","dataSource","events","link","showDataLoadingMessage","showChartLoadingMessage","baseChartMessageFont","baseChartMessageFontSize","baseChartMessageColor","dataLoadStartMessage","dataLoadErrorMessage","dataInvalidMessage","dataEmptyMessage","typeNotSupportedMessage","loadMessage","renderErrorMessage","containerBackgroundColor","containerBackgroundOpacity","containerClassName","baseChartMessageImageHAlign","baseChartMessageImageVAlign","baseChartMessageImageAlpha","baseChartMessageImageScale","typeNotSupportedMessageImageHAalign","typeNotSupportedMessageImageVAlign","typeNotSupportedMessageImageAlpha","typeNotSupportedMessageImageScale","dataLoadErrorMessageImageHAlign","dataLoadErrorMessageImageVAlign","dataLoadErrorMessageImageAlpha","dataLoadErrorMessageImageScale","dataLoadStartMessageImageHAlign","dataLoadStartMessageImageVAlign","dataLoadStartMessageImageAlpha","dataLoadStartMessageImageScale","dataInvalidMessageImageHAlign","dataInvalidMessageImageVAlign","dataInvalidMessageImageAlpha","dataInvalidMessageImageScale","dataEmptyMessageImageHAlign","dataEmptyMessageImageVAlign","dataEmptyMessageImageAlpha","dataEmptyMessageImageScale","renderErrorMessageImageHAlign","renderErrorMessageImageVAlign","renderErrorMessageImageAlpha","renderErrorMessageImageScale","loadMessageImageHAlign","loadMessageImageVAlign","loadMessageImageAlpha","loadMessageImageScale"],e.exports=t.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(1),s=(n=r)&&n.__esModule?n:{default:n},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0));t.default=Backbone.View.extend({initialize:function(){this.model.bind("change",this.onChange.bind(this)),this.chartConfig=this.model.toJSON(),this.render()},onChange:function(e){var t=this.resolveChartOptions(e.toJSON()),a=this.chartConfig,n=["width","height","type","dataFormat","dataSource","events"];this.checkAndUpdateChartRenderAt(t,a),this.checkAndUpdateChartDimensions(t,a),this.checkAndUpdateChartType(t,a),this.checkAndUpdateChartData(t,a),this.checkAndUpdateEvents(t,a),this.checkAndUpdateRestOptions(s.default.filter(function(e){return-1===n.indexOf(e)}),t,a),this.oldOptions=t},checkAndUpdateChartRenderAt:function(e,t){var a=e.renderAt,n=t.renderAt;String(a)!==String(n)&&(this.chart.dispose(),this.chartConfig.renderAt=a,this.render())},checkAndUpdateChartDimensions:function(e,t){var a=e.width,n=e.height,r=t.width,s=t.height;String(a)===String(r)&&String(n)===String(s)||(i.isUndefined(a)||i.isUndefined(n)?(i.isUndefined(a)||this.chart.resizeTo({w:a}),i.isUndefined(n)||this.chart.resizeTo({h:n})):this.chart.resizeTo(a,n))},checkAndUpdateChartType:function(e,t){var a=e.type,n=t.type;String(a).toLowerCase()!==String(n).toLowerCase()&&(i.isUndefined(a)||this.chart.chartType(String(a).toLowerCase()))},checkAndUpdateChartData:function(e,t){var a=e.dataFormat,n=e.dataSource,r=t.dataFormat,s=t.dataSource;String(a).toLowerCase()!==String(r).toLowerCase()?i.isUndefined(a)||i.isUndefined(n)||(this.chart.setChartData(n,String(a).toLowerCase()),this.chart.render()):this.isSameChartData(n,s)||i.isUndefined(n)||this.chart.setChartData(n,a?String(a).toLowerCase():"json")},isSameChartData:function(e,t){return i.isObject(e)&&i.isObject(t)?i.isSameObjectContent(e,t):e===t},checkAndUpdateEvents:function(e,t){var a=this,n=e.events,r=t.events,s=void 0,o=void 0;this.detectChartEventsChange(n,r)&&(i.isUndefined(n)||(s=Object.assign({},n),o=i.isUndefined(r)?{}:Object.assign({},r),Object.keys(o).forEach(function(e){o[e]===s[e]?s[e]=void 0:a.chart.removeEventListener(e,o[e])}),Object.keys(s).forEach(function(e){s[e]&&a.chart.addEventListener(e,s[e])})))},detectChartEventsChange:function(e,t){return i.isObject(e)&&i.isObject(t)?!this.isSameChartEvents(e,t):!(e===t)},isSameChartEvents:function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var a=Object.keys(e),n=0;n<a.length;++n){var r=a[n];if(e[r]!==t[r])return!1}return!0},checkAndUpdateRestOptions:function(e,t,a){var n=this,r=!1;e.forEach(function(e){var s=t[e],o=a[e];n.isSameOptionValue(s,o)||i.isUndefined(s)||n.chart.options&&n.chart.options.hasOwnProperty(e)&&(n.chart.options[e]=s,r=!0)}),r&&this.chart.render()},isSameOptionValue:function(e,t){return i.isObject(e)&&i.isObject(t)?i.isSameObjectContent(e,t):String(e)===String(t)},resolveChartOptions:function(e){var t=e.chartConfig?e.chartConfig:{},a=s.default.reduce(function(t,a){return t[a]=e[a],t},{});return Object.assign(a,t),i.isObject(a.dataSource)&&(a.dataSource=i.deepCopyOf(a.dataSource)),i.isObject(a.link)&&(a.link=i.deepCopyOf(a.link)),i.isObject(a.events)&&(a.events=Object.assign({},a.events)),a},render:function(){return this.chart=new FusionCharts(this.chartConfig),this.chart.render(),this}}),e.exports=t.default},function(e,t,a){"use strict";var n,r=a(2),s=(n=r)&&n.__esModule?n:{default:n};e.exports=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=new Backbone.Model(t),this.view=new s.default({model:this.model})}}])});